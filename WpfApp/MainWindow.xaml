<Window x:Class="WpfApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:WpfApp"
        WindowStartupLocation="CenterOwner"
        mc:Ignorable="d"
        Title="Тестовое приложение для SmartMealService" Height="450" Width="800"
        WindowStyle="None">
    <Window.Resources>
        <Style TargetType="Button">
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="Transparent">
                            <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Grid Background="#f6feb6">
        <Border Margin="30" Background="White" CornerRadius="45">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="0.1*"/>
                    <RowDefinition/>
                </Grid.RowDefinitions>

                <Grid Margin="0, 0, 50, 0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock 
                        Grid.Column="0"
                        Margin="20, 0, 0, 0"
                        VerticalAlignment="Bottom"
                        Text="Тестовое приложение для SmartMealService"
                        FontWeight="Bold"
                        FontSize="15"/>
                    <Button Grid.Column="1" Background="Transparent" BorderThickness="0" Margin="10, 0" Click="BtnMinimize_Click" FocusVisualStyle="{x:Null}">
                        <Rectangle Height="5" Width="20" Fill="Black" HorizontalAlignment="Stretch"/>
                    </Button>
                    <Button Grid.Column="2" Background="Transparent" BorderThickness="0" Margin="10, 0" Click="BtnClose_Click" FocusVisualStyle="{x:Null}">
                    <Path Grid.Column="2"
                          Fill="Black"
                          Data="M15.1 3.1l-2.2-2.2-4.9 5-4.9-5-2.2 2.2 5 4.9-5 4.9 2.2 2.2 4.9-5 4.9 5 2.2-2.2-5-4.9z"/>
                    </Button>
                </Grid>
                
                <Grid Grid.Row="1" Margin="15">
                    <Grid.OpacityMask>
                        <VisualBrush Visual="{Binding ElementName=clipBorder}" Stretch="None"/>
                    </Grid.OpacityMask>
                    <Border x:Name="clipBorder" CornerRadius="40" Background="White" Grid.ColumnSpan="2"/>
                    <Border CornerRadius="40" BorderThickness="2" BorderBrush="Black" Panel.ZIndex="1" Grid.ColumnSpan="2"/>

                    <Grid Panel.ZIndex="99" x:Name="GdLoad">
                        <Grid Background="White" Opacity="0.7"/>
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Чтение переменных" FontSize="40" x:Name="TBLoad"/>
                            <ProgressBar Margin="0, 20, 0 ,0" Height="10" BorderBrush="Green" IsIndeterminate="True"/>
                        </StackPanel>
                    </Grid>

                    <DataGrid
                        VerticalAlignment="Top"
                        RowHeaderWidth="0"
                        AutoGenerateColumns="False" 
                        Grid.ColumnSpan="2" 
                        x:Name="DGMain" 
                        ItemsSource="{Binding EnvVars}"
                        CanUserAddRows="False">
                        <DataGrid.Columns>
                            <DataGridTextColumn Width="50"/>
                            <DataGridTextColumn Width="0.5*" Binding="{Binding Name}" Header="Поле" IsReadOnly="True"/>
                            <DataGridTextColumn Width="0.5*" Binding="{Binding Value}" Header="Значение"/>
                            <DataGridTextColumn Width="*" Binding="{Binding Comment}" Header="Комментарий"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>

            </Grid>
        </Border>
    </Grid>
</Window>
